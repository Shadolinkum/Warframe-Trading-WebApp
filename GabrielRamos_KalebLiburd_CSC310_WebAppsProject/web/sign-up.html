<html>
    <head>
        <title>Sign-up Page</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript">
            <!--
                      
            function validateUsername(){
                //get value from username box that the person just typed in, store as username
                var username = document.forms["Registration_Form"]["username"].value;
            
                //if box is null or blank give error
                if (username === null || username === "") {
                    document.getElementById("un").innerHTML = "***Cannot be blank";
                    return false;
                } else {
                    //else do nothing/change message to empty sentence
                    document.getElementById("un").innerHTML = "";
                }
                //end of validateUsername
            }
            
            
            function validatePassword(){
                //get value for password from password box tht user just typed in
                var password = document.forms["Registration_Form"]["password"].value;
                //get value from retyped password
                var password2 = document.forms["Registration_Form"]["password2"].value;
                
                //start with one character that has 0 or any number of A-Z or a-z or one of the symbols and it has to end in one of these characters. 
                var letters = /^(?=.*[A-Z])(?=.*[a-z])(?=.*[!_@#$%]).*$/;
                
                //error message if password box blank
                if (password === null || password === "") {
                    document.getElementById("pass1").innerHTML = "***Cannot be blank";
                    return false;
                } else {
                    //else reset error message to blank
                    document.getElementById("pass1").innerHTML = "";
                }
                //error message if password too short
                if (password.length < 6) {
                    document.getElementById("pass1").innerHTML =
                            " ***passwords  must be 6 characters in length with \n\
                            at least one Uppercase, lowercase character, and special \n\
                            symbol from the following list: !_@#$% ";
                    return false;
                } else {
                    //else reset error message
                    document.getElementById("pass1").innerHTML = "";
                }
                
                //test if password syntax is right
                var test = password.match(letters);
                
                //alert for the test
                if (test === null) {
                    document.getElementById("pass1").innerHTML =
                            " ***passwords  must be 6 characters in length with \n\
                            at least one Uppercase, lowercase character, and special \n\
                            symbol from the following list: !_@#$% ";
                    return false;
                } else {
                    //else error message reset
                    document.getElementById("pass1").innerHTML = "";
                }

                //alert if password 2 is blank
                if (password2 === null || password2 === "") {
                    document.getElementById("pass2").innerHTML = "***Cannot be blank";
                    return false;
                } else {
                    document.getElementById("pass2").innerHTML = "";
                }
                //alert if password 2 isnt equal to password 1
                if (password !== password2) {
                    document.getElementById("pass2").innerHTML = "passwords do not match";
                    document.getElementById("pass1").innerHTML = "passwords do not match";
                    return false;
                } else {
                    document.getElementById("pass2").innerHTML = "";
                    document.getElementById("pass1").innerHTML = "";
                }
                //end of validatePassword
            }
            
            function validateEmail(){
                //get value from email box
                var email = document.forms["Registration_Form"]["email"].value;
                //variable to hold position of the @ symbol in the email
                var atIndex;
                //hold position of the . in the email
                var dotIndex;
                
                //alert if blank
                if (email === null || email === "") {
                    document.getElementById("em").innerHTML = "***Cannot be blank";
                    return false;
                } else {
                    document.getElementById("em").innerHTML = "";
                }
                // store the places of the @ and . symbols
                atIndex = email.indexOf("@");
                dotIndex = email.lastIndexOf(".");
                //if the @ symbol is the first character, or the dot comes before the @ symbol,
                //or the . has two or less characters after it,
                //the email is invalid
                if (atIndex < 1 || dotIndex < atIndex + 2 || dotIndex + 2 >= email.length) {  
                      document.getElementById("em").innerHTML = "***invalid e-mail, email format is: email@place.com";
                      return false;  
                  }  else {
                    // else alert reset
                    document.getElementById("em").innerHTML = "";
                }
                //make sure the ending of the email is edu, org, or com
                if (email.search("edu") === email.length - 3 && email.search("edu") === dotIndex + 1) {
                    document.getElementById("em").innerHTML = "";
                    return true;
                } else if (email.search("org") === dotIndex + 1 && email.search("org") === email.length - 3) {
                    document.getElementById("em").innerHTML = "";
                    return true;
                } else if (email.search("com") === dotIndex + 1 && email.search("com") === email.length - 3) {
                    document.getElementById("em").innerHTML = "";
                    return true;
                } else {
                    //else the email is invalid
                    document.getElementById("em").innerHTML = "***invalid e-mail, only .edu, .org, or .com";
                    return false;
                }
                //end of validateEmail
            }
            

            //-->
        </script>
    </head>

    <body background="Trinity&KubBackground.jpg">
    <center>
        <p style="color: blue; font-size: 200%">Sign up here!</p>

        <form name="Registration_Form" action="sign-up" onsubmit="return validateUsername(), validatePassword(), validateEmail()" method="POST">
            <b>Username:</b><br>
            <input type="text" name="username" onkeyup="return validateUsername()">                <label style=" color: red" id ="username"></label>
            <p style ="color: red" id ="un"></p>
            <br>
            
            <b>Password:</b>
            <br>
            <input type="password" name="password" onkeyup="return validatePassword()">                      <label style=" color: red" id ="password"></label>
            <p style ="color: red" id ="pass1"></p>
            <br>
            
            <b>Re-enter Password:</b><br>
            <input type="password" name="password2" onkeyup="return validatePassword()">                  <label style=" color: red" id ="password2"></label>
            <p style ="color: red"  id ="pass2"></p>
            <br>
            
            <b>E-mail:</b><br>
            <input type="text" name="email" onkeyup="return validateEmail()">                        <label style=" color: red" id ="email"></label>
            <p style ="color: red" id ="em"></p>
            <br>
            
            <input type="submit" name="regsubmit" value="Sign Up">
        </form><br>

        <A href="index.html"><p style="font-size: 400%">Back to Login</p></A>
    </center>
</body>
</html>
